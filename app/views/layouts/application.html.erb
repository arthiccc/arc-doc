<!DOCTYPE html>
<html class="h-full bg-[#fdfaf6]">
  <head>
    <title>Campus Archive — Repository</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>
    <%= stylesheet_link_tag "tailwind", "data-turbo-track": "reload" %>
    <%= javascript_importmap_tags %>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,700;1,700&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    
    <style>
      body { font-family: 'Inter', sans-serif; background-color: #fdfaf6; color: #1a1a1a; }
      h1, h2, h3, .font-serif { font-family: 'Playfair Display', serif; }
      
      .paper-border { border-color: #e8e1d5; }
      .search-underline { 
        border-bottom: 2px solid #d1c7b7; 
        transition: border-color 0.3s ease;
      }
      .search-underline:focus-within {
        border-color: #1a1a1a;
      }
      
      /* Refined scrollbar for the paper feel */
      ::-webkit-scrollbar { width: 8px; }
      ::-webkit-scrollbar-track { background: #fdfaf6; }
      ::-webkit-scrollbar-thumb { background: #e8e1d5; border-radius: 10px; }
      ::-webkit-scrollbar-thumb:hover { background: #d1c7b7; }
    </style>
  </head>

  <body class="h-full flex flex-col">
    <header class="bg-white border-b paper-border px-12 py-8 flex-none">
      <div class="max-w-7xl mx-auto flex justify-between items-end">
        <div>
          <%= link_to root_path, class: "no-underline" do %>
            <h1 class="text-5xl text-[#1a1a1a] tracking-tight">Archive Repository</h1>
          <% end %>
          <p class="text-[#999] italic mt-2 text-lg">Institutional Memory & Staff Records</p>
        </div>

        <div class="flex items-center gap-8">
          <% if user_signed_in? %>
            <div class="text-right">
              <div class="text-[10px] font-bold uppercase tracking-[0.2em] text-[#999] mb-1">Authenticated As</div>
              <div class="text-sm font-medium"><%= current_user.email %></div>
            </div>
            <%= button_to "Sign Out", destroy_user_session_path, method: :delete, class: "text-xs font-bold uppercase tracking-widest border-b-2 border-transparent hover:border-black transition-all pb-1" %>
          <% end %>
        </div>
      </div>
    </header>

    <div class="flex flex-grow max-w-7xl mx-auto w-full bg-white border-x paper-border shadow-sm">
      <!-- Minimal Sidebar -->
      <aside class="w-64 border-r paper-border p-12 flex-none">
        <nav class="space-y-8">
          <div>
            <div class="text-[10px] font-bold uppercase tracking-[0.2em] text-[#999] mb-6">Collections</div>
            <ul class="space-y-4 text-sm font-medium">
              <li><%= link_to "All Records", documents_path, class: "hover:text-black transition-colors #{controller_name == 'documents' ? 'underline underline-offset-8 text-black' : 'text-[#666]'}" %></li>
              <li><%= link_to "Departments", departments_path, class: "hover:text-black transition-colors #{controller_name == 'departments' ? 'underline underline-offset-8 text-black' : 'text-[#666]'}" %></li>
              <li><%= link_to "Categories", categories_path, class: "hover:text-black transition-colors #{controller_name == 'categories' ? 'underline underline-offset-8 text-black' : 'text-[#666]'}" %></li>
            </ul>
          </div>
          
          <div class="pt-8">
            <%= link_to new_document_path, class: "inline-block bg-[#1a1a1a] text-white px-6 py-3 text-xs font-bold uppercase tracking-widest hover:bg-black transition-colors rounded-sm" do %>
              Deposit File
            <% end %>
          </div>
        </nav>
      </aside>

      <!-- Main Repository -->
      <main class="flex-grow p-12 overflow-y-auto">
        <% if notice %>
          <div class="mb-8 p-4 bg-[#f8f9fa] border paper-border italic text-sm text-[#666]">
            <%= notice %>
          </div>
        <% end %>
        <%= yield %>
      </main>
    </div>

    <footer class="p-12 text-center text-[10px] font-bold uppercase tracking-[0.3em] text-[#ccc]">
      Campus Archive System — Est. 2026
    </footer>
  </body>
</html>